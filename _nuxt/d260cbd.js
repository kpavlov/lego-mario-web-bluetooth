(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{168:function(e,t,n){var content=n(177);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(70).default)("60e1d69c",content,!0,{sourceMap:!1})},174:function(e){e.exports=JSON.parse('[{"value":2,"name":"Goomba / Lava Bubble / Monty Mole / Paragoomba / Bullet Bill / Fuzzy","code":[0,1,3]},{"value":3,"name":"Shy Guy","code":[0,1,4]},{"value":4,"name":"Whomp","code":[0,1,5]},{"value":11,"name":"Nintendo Entertainment System","code":[0,0,0]},{"value":14,"name":"Bob-omb","code":[0,0,0]},{"value":16,"name":"Rotate (Yellow)","code":[0,0,0]},{"value":18,"name":"Dry Bones","code":[0,0,0]},{"value":20,"name":"Rotate (Yellow)","code":[0,0,0]},{"value":21,"name":"Time Block","code":[0,0,0]},{"value":23,"name":"Bowser Battle","code":[0,0,0]},{"value":26,"name":"Desert Pokey Hammer","code":[0,0,0]},{"value":29,"name":"Bowser","code":[0,0,0]},{"value":30,"name":"Rotate (Brown)","code":[0,0,0]},{"value":32,"name":"Toadette","code":[0,0,0]},{"value":33,"name":"1 Block","code":[0,0,0]},{"value":41,"name":"? Block","code":[0,0,0]},{"value":43,"name":"2 Block","code":[0,0,0]},{"value":44,"name":"Mover","code":[0,0,0]},{"value":46,"name":"Cloud","code":[0,0,0]},{"value":48,"name":"Spiny / Buzzy Beetle","code":[0,0,0]},{"value":49,"name":"Thwomp Drop Platform","code":[0,0,0]},{"value":53,"name":"Lava Bubble","code":[0,0,0]},{"value":54,"name":"Koopa","code":[0,0,0]},{"value":55,"name":"Thwomp","code":[0,0,0]},{"value":56,"name":"Pirahna Plant Cart","code":[0,0,0]},{"value":60,"name":"Toad","code":[0,0,0]},{"value":91,"name":"POW Block","code":[0,0,0]},{"value":93,"name":"Yoshi","code":[0,0,0]},{"value":95,"name":"P Block","code":[0,0,0]},{"value":99,"name":"Super Mushroom","code":[0,0,0]},{"value":107,"name":"Stone Eye","code":[0,0,0]},{"value":110,"name":"Pokey","code":[0,0,0]},{"value":112,"name":"Coins (10)","code":[0,0,0]},{"value":114,"name":"Rotate (Brown)","code":[0,0,0]},{"value":115,"name":"Koopa","code":[0,0,0]},{"value":121,"name":"Swooper","code":[0,0,0]},{"value":123,"name":"Star Block","code":[0,0,0]},{"value":126,"name":"Pirahna Plant","code":[0,0,0]},{"value":128,"name":"3 Block","code":[0,0,0]},{"value":129,"name":"Boo / Peepa","code":[0,0,0]},{"value":136,"name":"King Boo","code":[0,0,0]},{"value":137,"name":"Cheep Cheep / Eep Cheep / Urchin / Blooper","code":[0,0,0]},{"value":153,"name":"Bowser Jr.","code":[0,0,0]},{"value":183,"name":"End Course","code":[0,0,0]},{"value":184,"name":"Start Course","code":[0,0,0]},{"value":190,"name":"Coins (5)","code":[0,0,0]}]')},175:function(e){e.exports=JSON.parse('{"types":{"0":{"name":"Sensor"},"9":{"name":"Walking / Ground"},"10":{"name":"Water /  Blue / Splashing"},"11":{"name":"Grass / Green"},"12":{"name":"Sand / Yellow"},"33":{"name":"Piranha Slide"},"35":{"name":"Cloud"},"38":{"name":"Desert Pokey Rotating Platform"},"39":{"name":"Rotating Platform x2 Brown"},"40":{"name":"Rotating Platform x1 Brown"},"42":{"name":"Moving Platform Brown and yellow"},"43":{"name":"Nintendo Entertainment System"},"66":{"name":"Common enemy"},"67":{"name":"Bob-omb"},"68":{"name":"Spiny / Buzzy Beetle"},"69":{"name":"Common water enemy"},"70":{"name":"Boo / Peepa"},"80":{"name":"Shy Guy"},"81":{"name":"Whomp"},"82":{"name":"Dry Bones"},"83":{"name":"Bowser Battle","info":"Platform & Bowser"},"84":{"name":"Koopa Troopa"},"85":{"name":"Thwomp"},"86":{"name":"Toad"},"87":{"name":"Yoshi"},"88":{"name":"Pokey"},"89":{"name":"Swooper"},"90":{"name":"King Boo"},"91":{"name":"Bowser Jr."},"92":{"name":"Toadette"},"128":{"name":"? Block"},"129":{"name":"1 Block"},"130":{"name":"2 Block"},"131":{"name":"3 Block"},"132":{"name":"P Block"},"134":{"name":"Coin tiles"},"135":{"name":"Piranha Plant"},"136":{"name":"Stone Eye"},"176":{"name":"Fire Mario"},"177":{"name":"Cat Matio"},"178":{"name":"Builder Mario"},"179":{"name":"Propeller Mario"}},"keys":{"19":"Scanned tag ID","32":"Coins collected"}}')},176:function(e,t,n){"use strict";n(168)},177:function(e,t,n){var r=n(69)(!1);r.push([e.i,"h1[data-v-783e052a],h2[data-v-783e052a],h3[data-v-783e052a],h4[data-v-783e052a],h5[data-v-783e052a],h6[data-v-783e052a],p[data-v-783e052a],pre[data-v-783e052a]{margin:0}.color-sensor[data-v-783e052a]{width:100px;height:100px;border-radius:5px;border:2px dashed #262626}.sensor__box[data-v-783e052a]{width:100px;height:100%;display:inline-block;padding-top:100%;border-radius:5px;border:2px dashed #262626}.grid__row[data-v-783e052a]{display:flex;flex-wrap:wrap}.grid__col[data-v-783e052a]{flex:1}.u--align-center[data-v-783e052a]{align-items:center}.u--space-between[data-v-783e052a]{justify-content:space-between}.u--w_100[data-v-783e052a]{width:100%}",""]),e.exports=r},178:function(e,t,n){"use strict";n.r(t);var r=n(4),o=(n(43),n(169),n(170),n(25),n(41),n(44),n(14),n(45),n(39),n(174)),c=n(175),l={data:function(){return{device:null,server:null,service:null,characteristic:null,stickers:o,events:c,sensors:{rgb:[0,0,0],pants:[],motion:[]},state:{log:[],coins:0,totals:c.types}}},computed:{scores:function(){var e={};return this.state.log.forEach((function(t){32===t.key&&(e[t.type]=t)})),e},total:function(){return Object.values(this.scores).reduce((function(e,t){return e+t.value}),0)}},methods:{requestAndConnect:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.bluetooth.requestDevice({filters:[{namePrefix:"LEGO Mario"}],optionalServices:["00001623-1212-efde-1623-785feabcd123"]});case 3:e.device=t.sent,console.log("Device connected",e.device),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return");case 10:return e.device.addEventListener("gattserverdisconnected",e.handleDeviceDisconnect),t.next=13,e.device.gatt.connect();case 13:return e.server=t.sent,t.next=16,e.server.getPrimaryService("00001623-1212-efde-1623-785feabcd123");case 16:return e.service=t.sent,t.next=19,e.service.getCharacteristic("00001624-1212-efde-1623-785feabcd123");case 19:return e.characteristic=t.sent,e.characteristic.addEventListener("characteristicvaluechanged",e.handleValueEvent),e.characteristic.startNotifications(),t.next=24,e.subscribeToEvents();case 24:return t.next=26,e.subscribeToColor();case 26:return t.next=28,e.subscribeToPants();case 28:return t.next=30,e.subscribeToMotion();case 30:case"end":return t.stop()}}),t,null,[[0,7]])})))()},subscribeToEvents:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.characteristic.writeValue(new Uint8Array([10,0,65,3,2,1,0,0,0,1]));case 2:case"end":return t.stop()}}),t)})))()},subscribeToMotion:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.characteristic.writeValue(new Uint8Array([10,0,65,0,0,5,0,0,0,1]));case 2:case"end":return t.stop()}}),t)})))()},subscribeToPants:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.characteristic.writeValue(new Uint8Array([10,0,65,2,0,5,0,0,0,1]));case 2:case"end":return t.stop()}}),t)})))()},subscribeToColor:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.characteristic.writeValue(new Uint8Array([10,0,65,1,1,5,0,0,0,1]));case 2:case"end":return t.stop()}}),t)})))()},handleDeviceDisconnect:function(e){this.device=null,this.server=null,this.service=null,this.characteristic=null},handleValueEvent:function(e){var t=Array.from(new Uint8Array(e.target.value.buffer)),n=t.slice(0,3),r=t.slice(3),o=n[2];if(69===o){var c=r[0];if(0===c)this.sensors.motion=r.slice(1);else if(1===c)this.sensors.rgb=r.slice(1);else if(2===c)this.sensors.pants=r.slice(1);else if(3===c){var l=r[1],v=r[2],d=r[3]+256*r[4];this.parseEvent(l,v,d)}else console.log("Unhandled event: port=".concat(c," messageType=").concat(o," messageHeader=").concat(n," messageBody=").concat(r))}},parseEvent:function(e,t,n){this.state.log.push({type:e,key:t,value:n}),32===t&&(this.state.totals[e].coins=n)}}},v=(n(176),n(34)),component=Object(v.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"container mb-5"},[n("div",{staticClass:"row"},[e._m(0),n("div",{staticClass:"col align-self-center"},[n("button",{attrs:{disabled:e.device},on:{click:e.requestAndConnect}},[e._v("connect")])])])]),n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("h2",{staticClass:"mb-4"},[e._v("Sensors")]),n("div",{staticClass:"sensor mb-2"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-4"},[n("div",{staticClass:"sensor__box sensor__box--color",style:{backgroundColor:"rgb("+e.sensors.rgb+")"}})]),n("div",{staticClass:"col-8"},[n("h3",{staticClass:"mb-3"},[e._v("RGB")]),n("pre",[e._v("r:"+e._s(e.sensors.rgb[0])+", g:"+e._s(e.sensors.rgb[1])+", b:"+e._s(e.sensors.rgb[2]))])])])]),n("div",{staticClass:"sensor mb-2"},[n("div",{staticClass:"row"},[e._m(1),n("div",{staticClass:"col-8"},[n("h3",{staticClass:"mb-3"},[e._v("Pants")]),n("pre",[e._v(e._s(JSON.stringify(e.sensors.pants)))])])])]),n("div",{staticClass:"sensor mb-2"},[n("div",{staticClass:"row"},[e._m(2),n("div",{staticClass:"col-8"},[n("h3",{staticClass:"mb-3"},[e._v("Motion")]),n("pre",[e._v(e._s(JSON.stringify(e.sensors.motion)))])])])])]),n("div",{staticClass:"col"},[n("h2",{staticClass:"mb-4"},[e._v("Score = "+e._s(e.total))]),e._l(e.scores,(function(t){return t.value?n("h3",[e._v(e._s(e.events.types[t.type]?e.events.types[t.type].name:"???")+" = "+e._s(t.value))]):e._e()}))],2),n("div",{staticClass:"col"},[n("h2",{staticClass:"mb-4"},[e._v("Events")]),n("table",{staticClass:"u--w_100"},[e._m(3),n("tbody",e._l(e.state.log,(function(t){return n("tr",[n("td",[e._v(e._s(t.type))]),n("td",[e._v(e._s(e.events.types[t.type]?e.events.types[t.type].name:"???"))]),n("td",[e._v(e._s(e.events.keys[t.key]?e.events.keys[t.key]:t.key))]),n("td",[e._v(e._s(t.value))])])})),0)])])])])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col"},[n("h1",[e._v("Lego Mario")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-4"},[t("div",{staticClass:"sensor__box sensor__box--pants"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-4"},[t("div",{staticClass:"sensor__box sensor__box--motion"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("id")]),n("th",[e._v("name")]),n("th",[e._v("key")]),n("th",[e._v("value")])])])}],!1,null,"783e052a",null);t.default=component.exports}}]);